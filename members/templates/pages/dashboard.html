
{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="{% static 'assets/img/apple-icon.png' %}">
  <link rel="icon" type="image/png" href="{% static 'assets/img/favicon.png' %}">
  <title>
    WaterWise Karnal
  </title>
  <link href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,800" rel="stylesheet" />
  <link rel="stylesheet"  href="{% static 'assets/css/nucleo-icons.css' %}" />
  <link href="{% static 'assets/css/nucleo-svg.css' %}" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
<link id="pagestyle" href="{% static 'assets/css/soft-ui-dashboard.css' %}" rel="stylesheet" />

  <script defer data-site="YOUR_DOMAIN_HERE" src="https://api.nepcha.com/js/nepcha-analytics.js"></script>
  <!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Bootstrap 5 Bundle JS (includes Popper, needed for modal) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<meta name="csrf-token" content="{{ csrf_token }}">

  
  
</head>
<!-- Language switcher (put near header / top-right) -->
<div class="lang-switcher dropdown">
  <button class="btn btn-primary dropdown-toggle" type="button" id="langMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false">
     <span class="lang-text">Language</span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="langMenuButton">
    <li>
      <form action="{% url 'set_language' %}" method="post">
        {% csrf_token %}
        <input name="next" type="hidden" value="{{ redirect_to }}">
        <input type="hidden" name="language" value="en">
        <button type="submit" class="dropdown-item">English</button>
      </form>
    </li>
    <li>
      <form action="{% url 'set_language' %}" method="post">
        {% csrf_token %}
        <input name="next" type="hidden" value="{{ redirect_to }}">
        <input type="hidden" name="language" value="hi">
        <button type="submit" class="dropdown-item">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
      </form>
    </li>
  </ul>
</div>



<body class="g-sidenav-show bg-gray-100">
  {% block content %}
  
  <!-- Sidebar Toggle Button for Small Screens -->
  <button id="toggleSidebar" class="btn btn-light d-xl-none position-fixed top-3 start-3 z-index-3 shadow">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#333" class="bi bi-list" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M2.5 12.5a.5.5 0 010-1h11a.5.5 0 010 1h-11zm0-4a.5.5 0 010-1h11a.5.5 0 010 1h-11zm0-4a.5.5 0 010-1h11a.5.5 0 010 1h-11z"/>
    </svg>
  </button>

  <aside class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3" id="sidenav-main">
    <div class="sidenav-header">
      <a class="navbar-brand m-0" href="{% url 'dashboard' %}">
        <img src="{% static 'assets/img/logo-ct-dark.png' %}" class="navbar-brand-img h-100" alt="{% trans 'Main Logo' %}">
        <span class="ms-1 font-weight-bold">{% trans "WaterWise Karnal" %}</span>
      </a>
    </div>

    <hr class="horizontal dark mt-0">
    <div class="collapse navbar-collapse w-auto" id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <!-- Dashboard Link -->
        <li class="nav-item">
          <a class="nav-link d-flex align-items-center {% if request.path == '/dashboard/' %}active{% endif %}" href="{% url 'dashboard' %}">
            <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-tv-2 text-dark text-sm"></i>
            </div>
            <span class="nav-link-text text-dark fw-semibold">{% trans "Dashboard" %}</span>
          </a>
        </li>

        <!-- Rainwater Harvesting Link -->
        <li class="nav-item">
          <a class="nav-link d-flex align-items-center {% if request.path == '/rainwater-harvesting/' %}active{% endif %}" href="{% url 'rainwater_harvesting' %}">
            <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2C12 2 7 8 7 12C7 15.3137 9.68629 18 13 18C16.3137 18 19 15.3137 19 12C19 8 14 2 14 2H12Z" />
                <path d="M12 22V18" />
              </svg>
            </div>
            <span class="nav-link-text text-dark fw-semibold">{% trans "Rainwater Harvesting" %}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>

  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <div class="text-end mb-4">
      <button id="toggle-panel" class="btn btn-danger btn-lg px-4 py-2 fw-bold rounded-pill shadow glow-on-hover animate__animated animate__pulse animate__infinite d-inline-flex align-items-center">
        <i class="fas fa-bell me-2 animate__animated animate__tada animate__infinite animate__slower"></i>
        <span>{% trans "Show Notifications" %}</span>
      </button>
    </div>

    <!-- Notification Panel -->
    <div id="notification-panel" class="d-none animate__animated">
      <div class="card shadow-lg border-radius-xl overflow-hidden animate__animated animate__fadeInDownBig animate__faster">
        <div class="card-header bg-gradient-danger text-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="fas fa-bullhorn me-2"></i>{% trans "WaterWise Subsidies & Weather Alerts" %}</h5>
        </div>
        <div class="card-body bg-light">

          <!-- Subsidy 1 -->
          <div class="p-3 mb-4 border-start border-5 border-success bg-white rounded shadow-sm animate__animated animate__slideInLeft animate__delay-1s">
            <h6 class="text-success mb-1">üíß {% trans "Micro-Irrigation Subsidies (Drip & Sprinkler)" %}</h6>
            <p class="small mb-2">{% blocktrans %}UP govt provides <strong>65‚Äì90% subsidy</strong> on micro-irrigation systems for farmers. Apply now to save water & money.{% endblocktrans %}</p>
            <a href="https://www.zeebiz.com/hindi/economy/agriculture/sarkari-yojana-up-government-giving-65-to-90-percent-subsidy-on-micro-irrigation-system-apply-online-212808" class="btn btn-sm btn-success" target="_blank">
              {% trans "Apply Now" %} <i class="fas fa-external-link-alt ms-1"></i>
            </a>
          </div>

          <!-- Subsidy 2 -->
          <div class="p-3 mb-4 border-start border-5 border-warning bg-white rounded shadow-sm animate__animated animate__slideInRight animate__delay-2s">
            <h6 class="text-warning mb-1">‚òÄÔ∏è {% trans "Solar-Powered Pump Subsidy (PM-KUSUM)" %}</h6>
            <p class="small mb-2">{% trans "Central Govt‚Äôs PM-KUSUM scheme offers massive subsidies for farmers to install solar-powered irrigation pumps." %}</p>
            <a href="https://mnre.gov.in/‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä-‡§ï‡§ø‡§∏‡§æ‡§®-‡§ä‡§∞‡•ç‡§ú‡§æ" class="btn btn-sm btn-warning text-dark" target="_blank">
              {% trans "Know More" %} <i class="fas fa-sun ms-1"></i>
            </a>
          </div>

          <!-- IMD Alert -->
          <div id="weather-alert" class="p-3 border-start border-5 border-danger bg-white rounded shadow-sm animate__animated animate__zoomIn animate__delay-3s">
            <h6 class="text-danger mb-1">üåßÔ∏è {% trans "IMD Rain Alert" %}</h6>
            <p id="weather-message" class="small mb-2">{% trans "Fetching latest rainfall advisory..." %}</p>
            <a href="https://mausam.imd.gov.in/" class="btn btn-sm btn-danger" target="_blank">
              {% trans "IMD Website" %} <i class="fas fa-cloud-rain ms-1"></i>
            </a>
          </div>

        </div>
      </div>
    </div>



<!-- Animate.css for cool transitions -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-- Navbar -->

    

    
 <!-- üå§Ô∏è Soft Horizontal Filter Section Inside Page -->
<style>
  @media (min-width: 768px) {
    .inline-form {
      display: flex;
      flex-wrap: wrap;
      align-items: end;
      gap: 1rem;
    }

    .inline-form .form-group {
      flex: 1 1 20%;
    }

    .inline-form .btn-wrapper {
      flex: 1 1 auto;
    }
  }

  @media (max-width: 767px) {
    .inline-form .form-group {
      margin-bottom: 1rem;
    }

    .inline-form .btn-wrapper {
      text-align: center;
    }

    .inline-form button {
      width: 100%;
    }
  }
</style>

<form id="preference-form" class="inline-form">
  <!-- District -->
  <div class="form-group">
    <label>{% trans "District" %}</label>
    <select id="district-select" disabled>
      <option value="Karnal">{% trans "Karnal" %}</option>
    </select>
  </div>

  <!-- Type -->
  <div class="form-group">
    <label>{% trans "Type" %}</label>
    <select id="type-select">
      <option value="" disabled selected>{% trans "Select Type" %}</option>
      <option value="village">{% trans "Village" %}</option>
      <option value="town">{% trans "Town" %}</option>
    </select>
  </div>

  <!-- Place -->
  <div class="form-group">
    <label>{% trans "Place" %}</label>
    <select id="place-select">
      <option value="" disabled selected>{% trans "Select Place" %}</option>
    </select>
  </div>

  <!-- Submit -->
  <div class="form-group btn-wrapper">
    <button type="submit">{% trans "Save & Continue" %}</button>
  </div>
</form>

<!-- Location Modal -->
<div class="modal fade" id="locationModal" tabindex="-1" aria-labelledby="locationModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-md">
    <div class="modal-content rounded-4 shadow">
      <div class="modal-header border-0">
        <h5 class="modal-title" id="locationModalLabel">{% trans "Select Location" %}</h5>
      </div>
      <div class="modal-body">
        <form id="locationForm">
          {% csrf_token %}
          <div class="mb-3">
            <label class="form-label">{% trans "District" %}</label>
            <select class="form-select" disabled>
              <option>{% trans "Karnal" %}</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">{% trans "Type" %}</label>
            <select id="placeType" name="place_type" class="form-select" required>
              <option value="">{% trans "Select" %}</option>
              <option value="village">{% trans "Village" %}</option>
              <option value="town">{% trans "Town" %}</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">{% trans "Place" %}</label>
            <select id="place" name="place_id" class="form-select" required>
              <option value="">{% trans "Select Place" %}</option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary w-100 rounded-pill">{% trans "Continue" %}</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Cards Section -->
<div id="dashboard-cards">
  <div class="row">
    <!-- Groundwater Status Card -->
    <div class="col-lg-6 col-md-6 col-sm-12 mb-4">
      <div class="card h-100" id="location-card" style="background-color: #2e7d32; color: white;">
        <div class="card-body">
          <h6>{% trans "Groundwater Status" %}</h6>

          <div class="d-flex mb-3">
            <div class="icon">üè†</div>
            <div>
              <small>{% trans "Village/Town" %}</small>
              <h5 id="place-name">
                {% if preference %}{{ preference.place.name }}{% else %}--{% endif %}
              </h5>
            </div>
          </div>

          <div class="d-flex mb-3">
            <div class="icon">üìç</div>
            <div>
              <small>{% trans "District" %}</small>
              <h5 id="district-name">
                {% if preference %}{{ preference.place.district }}{% else %}--{% endif %}
              </h5>
            </div>
          </div>

          <div class="d-flex mb-3">
            <div class="icon">üìè</div>
            <div>
              <small>{% trans "Water Level (m bgl)" %}</small>
              <h5 id="level-cms">
                {% for d in groundwater_data %}
                  {% if d.parameter == "Water Level" %}
                    {{ d.value }} {{ d.unit }}
                  {% endif %}
                {% empty %}--{% endfor %}
              </h5>
            </div>
          </div>

          <div class="d-flex">
            <div class="icon">‚úÖ</div>
            <div>
              <small>{% trans "Status" %}</small>
              <h5 id="location-status">
                {% for d in groundwater_data %}
                  {% if d.parameter|default:''|lower == 'water level' %}
                    {{ d.status|default:_("Safe") }}
                  {% endif %}
                {% empty %}--{% endfor %}
              </h5>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Water Quality Card -->
    <div class="col-lg-6 col-md-6 col-sm-12 mb-4">
      <div class="card h-100" id="quality-card" style="background-color: #2e7d32; color: white;">
        <div class="card-body">
          <h6>{% trans "Water Quality" %}</h6>

          <div class="d-flex mb-3">
            <div class="icon">‚úîÔ∏è</div>
            <div>
              <small>{% trans "Water Quality Status" %}</small>
              <h5 id="overall-quality">
                {% if groundwater_data %}
                  {% with unsafe=0 %}
                    {% for d in groundwater_data %}
                      {% if d.status and d.status != "Safe" %}
                        {% with unsafe=unsafe|add:"1" %}{% endwith %}
                      {% endif %}
                    {% endfor %}
                    {% if unsafe == 0 %}
                      {% trans "Safe" %}
                    {% else %}
                      {% trans "Not Safe" %}
                    {% endif %}
                  {% endwith %}
                {% else %}
                  --
                {% endif %}
              </h5>
            </div>
          </div>

          <!-- Parameter: Fluoride -->
          <div class="d-flex mb-3">
            <div class="icon">ü¶∑</div>
            <div>
              <small>{% trans "Fluoride" %}</small>
              <h5 id="param-fluoride">
                {% for d in groundwater_data %}
                  {% if d.parameter|lower == 'fluoride' %}
                    {{ d.value }} {{ d.unit }} ({{ d.status|default:_("--") }})
                  {% endif %}
                {% empty %}
                  --
                {% endfor %}
              </h5>
            </div>
          </div>

          <!-- Parameter: Nitrate -->
          <div class="d-flex mb-3">
            <div class="icon">üß™</div>
            <div>
              <small>{% trans "Nitrate" %}</small>
              <h5 id="param-nitrate">
                {% for d in groundwater_data %}
                  {% if d.parameter|lower == 'nitrate' %}
                    {{ d.value }} {{ d.unit }} ({{ d.status|default:_("--") }})
                  {% endif %}
                {% empty %}
                  --
                {% endfor %}
              </h5>
            </div>
          </div>

          <!-- Parameter: Arsenic -->
          <div class="d-flex mb-3">
            <div class="icon">‚ò†Ô∏è</div>
            <div>
              <small>{% trans "Arsenic" %}</small>
              <h5 id="param-arsenic">
                {% for d in groundwater_data %}
                  {% if d.parameter|lower == 'arsenic' %}
                    {{ d.value }} {{ d.unit }} ({{ d.status|default:_("--") }})
                  {% endif %}
                {% empty %}
                  --
                {% endfor %}
              </h5>
            </div>
          </div>

          <!-- Parameter: Iron -->
          <div class="d-flex mb-3">
            <div class="icon">üß≤</div>
            <div>
              <small>{% trans "Iron" %}</small>
              <h5 id="param-iron">
                {% for d in groundwater_data %}
                  {% if d.parameter|lower == 'iron' %}
                    {{ d.value }} {{ d.unit }} ({{ d.status|default:_("--") }})
                  {% endif %}
                {% empty %}
                  --
                {% endfor %}
              </h5>
            </div>
          </div>

          <!-- Parameter: EC -->
          <div class="d-flex">
            <div class="icon">üåä</div>
            <div>
              <small>{% trans "EC (Salinity)" %}</small>
              <h5 id="param-ec">
                {% for d in groundwater_data %}
                  {% if d.parameter|lower == 'ec' %}
                    {{ d.value }} {{ d.unit }} ({{ d.status|default:_("--") }})
                  {% endif %}
                {% empty %}
                  --
                {% endfor %}
              </h5>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Rainwater Harvesting Section -->
<section style="max-width: 800px; margin: 40px auto; padding: 25px; background: white; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); font-family: 'Segoe UI', sans-serif;">
    <div style="display: flex; flex-wrap: wrap; align-items: center; gap: 20px;">
        
        <!-- Image -->
        <div style="flex: 1 1 250px;">
            <img src="{% static 'images/rainwater-harvesting.png' %}" alt="{% trans 'Rainwater Harvesting' %}" style="width: 100%; border-radius: 12px;">
        </div>

        <!-- Content -->
        <div style="flex: 2 1 300px;">
            <h2 style="color: #2C7A7B; margin-bottom: 10px;">{% trans "Rainwater Harvesting" %}</h2>
            <p style="color: #555; line-height: 1.6;">
                {% blocktrans %}Rainwater harvesting is a simple and effective method of collecting and storing rainwater for future use. It helps conserve water, reduces dependency on groundwater, and promotes sustainable living. Learn how this practice can benefit your community and the environment.{% endblocktrans %}



            </p>
            <a href="{% url 'rainwater_harvesting' %}" 
               style="display: inline-block; padding: 10px 18px; background: #2C7A7B; color: white; border-radius: 8px; text-decoration: none; font-weight: 500; transition: background 0.3s ease;">
                {% trans "Read More ‚Üí" %}
            </a>
        </div>

    </div>
</section>



{% endblock %}
    <!--   Core JS Files   -->
  <script src="{% static 'assets/js/core/popper.min.js' %}"></script>
  <script src="{% static 'assets/js/core/bootstrap.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins/perfect-scrollbar.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins/smooth-scrollbar.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins/chartjs.min.js' %}"></script>
  <!-- Bootstrap Bundle JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    var ctx = document.getElementById("chart-bars").getContext("2d");

    new Chart(ctx, {
      type: "bar",
      data: {
        labels: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        datasets: [{
          label: "Sales",
          tension: 0.4,
          borderWidth: 0,
          borderRadius: 4,
          borderSkipped: false,
          backgroundColor: "#fff",
          data: [450, 200, 100, 220, 500, 100, 400, 230, 500],
          maxBarThickness: 6
        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false }
        },
        interaction: {
          intersect: false,
          mode: 'index',
        },
        scales: {
          y: {
            grid: {
              drawBorder: false,
              display: false,
              drawOnChartArea: false,
              drawTicks: false,
            },
            ticks: {
              suggestedMin: 0,
              suggestedMax: 500,
              beginAtZero: true,
              padding: 15,
              font: {
                size: 14,
                family: "Inter",
                style: 'normal',
                lineHeight: 2
              },
              color: "#fff"
            },
          },
          x: {
            grid: {
              drawBorder: false,
              display: false,
              drawOnChartArea: false,
              drawTicks: false
            },
            ticks: {
              display: false
            },
          },
        },
      },
    });

    var ctx2 = document.getElementById("chart-line").getContext("2d");

    var gradientStroke1 = ctx2.createLinearGradient(0, 230, 0, 50);
    gradientStroke1.addColorStop(1, 'rgba(203,12,159,0.2)');
    gradientStroke1.addColorStop(0.2, 'rgba(72,72,176,0.0)');
    gradientStroke1.addColorStop(0, 'rgba(203,12,159,0)');

    var gradientStroke2 = ctx2.createLinearGradient(0, 230, 0, 50);
    gradientStroke2.addColorStop(1, 'rgba(20,23,39,0.2)');
    gradientStroke2.addColorStop(0.2, 'rgba(72,72,176,0.0)');
    gradientStroke2.addColorStop(0, 'rgba(20,23,39,0)');

    new Chart(ctx2, {
      type: "line",
      data: {
        labels: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        datasets: [{
            label: "Mobile apps",
            tension: 0.4,
            borderWidth: 0,
            pointRadius: 0,
            borderColor: "#cb0c9f",
            borderWidth: 3,
            backgroundColor: gradientStroke1,
            fill: true,
            data: [50, 40, 300, 220, 500, 250, 400, 230, 500],
            maxBarThickness: 6
          },
          {
            label: "Websites",
            tension: 0.4,
            borderWidth: 0,
            pointRadius: 0,
            borderColor: "#3A416F",
            borderWidth: 3,
            backgroundColor: gradientStroke2,
            fill: true,
            data: [30, 90, 40, 140, 290, 290, 340, 230, 400],
            maxBarThickness: 6
          },
        ],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false }
        },
        interaction: {
          intersect: false,
          mode: 'index',
        },
        scales: {
          y: {
            grid: {
              drawBorder: false,
              display: true,
              drawOnChartArea: true,
              drawTicks: false,
              borderDash: [5, 5]
            },
            ticks: {
              display: true,
              padding: 10,
              color: '#b2b9bf',
              font: {
                size: 11,
                family: "Inter",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
          x: {
            grid: {
              drawBorder: false,
              display: false,
              drawOnChartArea: false,
              drawTicks: false,
              borderDash: [5, 5]
            },
            ticks: {
              display: true,
              color: '#b2b9bf',
              padding: 20,
              font: {
                size: 11,
                family: "Inter",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
        },
      },
    });
  </script>
<style>
  #dashboard-cards {
    padding: 40px;
  }

  #dashboard-cards .row > div {
  margin-bottom: 30px;
}
#dashboard-cards .col-lg-6 {
  padding-left: 15px;
  padding-right: 15px;
}

  #dashboard-cards .card {
    width: 100%;
    max-width: 600px;
    background-color: #ae650b;
    color: white;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    overflow: hidden;
    padding: 24px;
    box-sizing: border-box;
    transition: background-color 0.3s;
      color: inherit;
  }

  #dashboard-cards .card h6 {
    margin-bottom: 24px;
    font-size: 22px;
  }

  #dashboard-cards .d-flex {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
  }

  #dashboard-cards .icon {
    width: 40px;
    height: 40px;
    background-color: white;
    color: black;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    margin-right: 15px;
    font-size: 20px;
  }

  .info-icon {
    display: inline-block;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background-color: #ffffff;
    color: #000000;
    text-align: center;
    font-size: 12px;
    font-weight: bold;
    line-height: 18px;
    cursor: pointer;
    margin-left: 6px;
    position: relative;
  }

  .info-icon:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    top: 24px;
    left: 0;
    background-color: #333;
    color: #fff;
    padding: 5px 10px;
    border-radius: 4px;
    white-space: nowrap;
    font-size: 12px;
    z-index: 10;
  }

  /* Make all field labels white */
#dashboard-cards small {
  color: #ffffff;
}

/* Make all output values (like -- or data) bold and white */
#dashboard-cards h5 {
  color: #ffffff;
  font-weight: bold;
}

/* Make the info icon visible (black dot with white text inside) */
.info-icon {
  background-color: #ffffff;
  color: #000000;
}
#dashboard-cards h5 {
  margin-top: 4px;
  font-size: 16px;
}

</style>

<style>
.glow-on-hover {
  transition: 0.3s all ease-in-out;
  box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
}
.glow-on-hover:hover {
  box-shadow: 0 0 25px rgba(255, 0, 0, 0.9), 0 0 10px rgba(255, 0, 0, 0.5);
  transform: scale(1.05);
}
</style>



 <script>
function updateCardColor(status) {
  const locationCard = document.getElementById('location-card');
  const qualityCard = document.getElementById('quality-card');
  const safeColor = '#2e7d32';    // green
  const unsafeColor = '#c62828';  // red

  // Detect page language from <html lang="...">
  const lang = document.documentElement.lang || 'en';

  if (lang === 'hi') {
    // Always green for Hindi pages
    locationCard.style.backgroundColor = safeColor;
    qualityCard.style.backgroundColor = safeColor;
  } else {
    // Normal behavior for other languages
    if (status === 'Safe') {
      locationCard.style.backgroundColor = safeColor;
      qualityCard.style.backgroundColor = safeColor;
    } else if (status === 'Not Safe') {
      locationCard.style.backgroundColor = unsafeColor;
      qualityCard.style.backgroundColor = unsafeColor;
    }
  }
}
</script>
<!-- Declare save URL globally -->
<script>
  const SAVE_PREF_URL = "{% url 'save_user_place' %}";
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const hasPreference = "{{ user_has_preference|yesno:'true,false' }}" === "true";
    if (!hasPreference) {
      const modalInstance = new bootstrap.Modal(document.getElementById("locationModal"));
      modalInstance.show();
    }

    // Modal dropdown logic
    const placeTypeSelect = document.getElementById("placeType");
    const placeDropdown = document.getElementById("place");
    const form = document.getElementById("locationForm");

    if (placeTypeSelect && placeDropdown && form) {
      placeTypeSelect.addEventListener("change", async function () {
        const type = this.value.trim();
        placeDropdown.innerHTML = '<option>Loading...</option>';

        if (!type) {
          placeDropdown.innerHTML = '<option value="">Select place</option>';
          return;
        }

        try {
          const res = await fetch(`/api/places/?district=Karnal&type=${type}`);
          const data = await res.json();

          if (!Array.isArray(data)) {
            console.error("Invalid response:", data);
            placeDropdown.innerHTML = '<option>Error loading places</option>';
            return;
          }

          if (data.length === 0) {
            placeDropdown.innerHTML = '<option>No places found</option>';
          } else {
            placeDropdown.innerHTML = data
              .map(p => `<option value="${p.id}">${p.name}</option>`)
              .join('');
          }
        } catch (error) {
          console.error("Fetch failed:", error);
          placeDropdown.innerHTML = '<option>Error loading</option>';
        }
      });

      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        const placeId = placeDropdown.value;
        const placeType = placeTypeSelect.value;

        if (!placeId || !placeType) {
          alert("Please select both type and place.");
          return;
        }

        try {
          const res = await fetch("{% url 'save_user_place' %}", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "X-CSRFToken": getCSRFToken()

            },
            body: JSON.stringify({
              place_id: placeId,
              place_type: placeType
            }),
          });

          const result = await res.json();
          console.log("Save response:", result);

          if (res.ok && result.message?.toLowerCase().includes("saved")) {
            location.reload();
          } else {
            alert("Failed to save preference.");
            console.error("Server said:", result);
          }

        } catch (err) {
          console.error("Form submit error", err);
         
        }
      });
    }
  });
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  const modalElement = document.getElementById("locationModal");
  const modal = new bootstrap.Modal(modalElement);

  if (!sessionStorage.getItem("locationSelected")) {
    modal.show();
  }

  const form = document.getElementById("locationForm");
  const placeTypeSelect = document.getElementById("placeType");
  const placeDropdown = document.getElementById("place");

  placeTypeSelect.addEventListener("change", async function () {
    const type = this.value.trim();
    placeDropdown.innerHTML = '<option>Loading...</option>';

    if (!type) {
      placeDropdown.innerHTML = '<option value="">Select place</option>';
      return;
    }

    try {
      const res = await fetch(`/api/places/?district=Karnal&type=${type}`, {
        method: "GET",
        credentials: "same-origin"
      });

      const data = await res.json();
      if (!Array.isArray(data)) throw new Error("Invalid response");

      if (data.length === 0) {
        placeDropdown.innerHTML = '<option>No places found</option>';
      } else {
        placeDropdown.innerHTML = data.map(p => `<option value="${p.id}">${p.name}</option>`).join('');
      }
    } catch (error) {
      console.error("Fetch failed:", error);
      placeDropdown.innerHTML = '<option>Error loading</option>';
    }
  });

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    const placeId = document.getElementById("place").value;
    const placeType = document.getElementById("placeType").value;

    if (!placeId || !placeType) {
      alert("Please select a valid location");
      return;
    }

    try {
      // Save user preference
      const saveRes = await fetch("/save-user-place/", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "X-CSRFToken": getCSRFToken()
  },
  credentials: "same-origin",
  body: JSON.stringify({
    place_id: placeId,
    place_type: placeType
  })
});

      if (!saveRes.ok) {
  const text = await saveRes.text();
  alert("Failed to save preference:\n" + text);
  throw new Error(`Save failed. Response text: ${text}`);
}

      // Fetch groundwater data
      const res = await fetch(`/api/data/?place_id=${placeId}`, {
        method: "GET",
        credentials: "same-origin"
      });

      const data = await res.json();

      // Reset display
      document.getElementById("param-fluoride").innerText = "--";
      document.getElementById("param-nitrate").innerText = "--";
      document.getElementById("param-arsenic").innerText = "--";
      document.getElementById("param-iron").innerText = "--";
      document.getElementById("param-ec").innerText = "--";
      document.getElementById("level-cms").innerText = "--";
      document.getElementById("location-status").innerText = "--";
      document.getElementById("overall-quality").innerText = "--";

      const statusList = [];

      data.forEach(d => {
        const valueText = `${d.value} ${d.unit}`;
        const param = d.parameter.toLowerCase();

        switch (param) {
          case "fluoride":
            document.getElementById("param-fluoride").innerText = `${valueText} (${d.status})`;
            break;
          case "nitrate":
            document.getElementById("param-nitrate").innerText = `${valueText} (${d.status})`;
            break;
          case "arsenic":
            document.getElementById("param-arsenic").innerText = `${valueText} (${d.status})`;
            break;
          case "iron":
            document.getElementById("param-iron").innerText = `${valueText} (${d.status})`;
            break;
          case "ec":
          case "salinity":
            document.getElementById("param-ec").innerText = `${valueText} (${d.status})`;
            break;
          case "water level":
            document.getElementById("level-cms").innerText = d.value;
            break;
        }

        if (d.status) statusList.push(d.status.toLowerCase());
      });

      const finalStatus = statusList.includes("not safe") ? "Not Safe" : "Safe";
      document.getElementById("location-status").innerText = finalStatus;
      document.getElementById("overall-quality").innerText = finalStatus;

      const safeColor = "#2e7d32";
      const dangerColor = "#c62828";
      const bg = finalStatus === "Not Safe" ? dangerColor : safeColor;

      document.getElementById("location-card").style.backgroundColor = bg;
      document.getElementById("quality-card").style.backgroundColor = bg;

      // Update UI text
      const placeText = document.getElementById("place").selectedOptions[0].textContent;
      document.getElementById("place-name").innerText = placeText;
      document.getElementById("district-name").innerText = "Karnal";

      sessionStorage.setItem("locationSelected", "true");
      modal.hide();

    } catch (err) {
      console.error("Something went wrong:", err);
      alert("Something went wrong. Please try again.");
    }
  });

  function getCSRFToken() {
    const cookie = document.cookie.split(";").find(c => c.trim().startsWith("csrftoken="));
    return cookie ? decodeURIComponent(cookie.split("=")[1]) : "";
  }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const modal = new bootstrap.Modal(document.getElementById("locationModal"));
  if (!sessionStorage.getItem("locationSelected")) modal.show();

  document.getElementById("placeType").addEventListener("change", async function () {
    try {
      const res = await fetch(`/api/places/?district=Karnal&type=${this.value}`, { credentials: "same-origin" });
      console.log("places status:", res.status);
      const data = await res.json();
      console.log("places data:", data);
    } catch(err) { console.error("places error:", err); }
  });

  document.getElementById("locationForm").addEventListener("submit", async function (e) {
    e.preventDefault();
    const placeId = this.place_id.value, placeType = this.place_type.value;

    try {
      console.log("Saving pref...", placeId, placeType);
      const saveRes = await fetch("/save-user-place/", {
        method: "POST",
        headers: { "Content-Type": "application/json", "X-CSRFToken": getCSRFToken() },
        credentials: "same-origin",
        body: JSON.stringify({ place_id: placeId, place_type: placeType })
      });
      console.log("save status:", saveRes.status, await saveRes.text());
      if (!saveRes.ok) throw new Error("Save failed");

      const res = await fetch(`/api/data/?place_id=${placeId}`, { credentials: "same-origin" });
      console.log("data status:", res.status);
      const contentType = res.headers.get("Content-Type") || "";
      console.log("data content-type:", contentType);

      if (!contentType.includes("application/json")) {
        const text = await res.text();
        console.error("Non-JSON response:", text);
        throw new Error("Not JSON");
      }

      const data = await res.json();
      console.log("Data JSON:", data);

      // ... then use previous logic to update DOM ...

      sessionStorage.setItem("locationSelected", "true");
      modal.hide();

    } catch (err) {
      console.error("Error:", err);
      alert("Something went wrong ‚Äî check console.");
    }
  });

  function getCSRFToken() {
    const c = document.cookie.split(";").find(c=>c.trim().startsWith("csrftoken="));
    return c ? c.split("=")[1] : "";
  }
});
</script>








<script>
const defaultLat = {{ default_lat }};
  const defaultLon = {{ default_lon }};
  const apiKey = "{{ api_key }}";

  // Helper to update the UI with weather data
  function updateWeatherUI(description, temp) {
    let message = `üå¶Ô∏è Weather: ${description}, Temp: ${temp}¬∞C`;
    if (description.toLowerCase().includes("rain") || description.toLowerCase().includes("storm")) {
      message += " ‚Äî ‚ö†Ô∏è Carry protection & avoid low-lying areas!";
      document.getElementById("weather-alert").classList.add("bg-warning", "text-dark");
    }
    document.getElementById("weather-message").innerText = message;
  }

  // Fetch weather using coordinates
  async function fetchWeather(lat, lon) {
    try {
      const response = await fetch(
        `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`
      );
      if (!response.ok) {
        throw new Error("Failed to fetch weather.");
      }
      const data = await response.json();

      // Safety check
      if (data && data.weather && data.weather.length > 0 && data.main) {
        const description = data.weather[0].description;
        const temp = data.main.temp;
        updateWeatherUI(description, temp);
      } else {
        document.getElementById("weather-message").innerText = "‚ö†Ô∏è Weather data incomplete.";
      }
    } catch (error) {
      console.error("Weather fetch error:", error);
      document.getElementById("weather-message").innerText = "‚ö†Ô∏è Unable to fetch weather data.";
    }
  }

  // Initialize: Try user location or fallback
  function initWeather() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (position) => {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          console.log("User location:", lat, lon);
          fetchWeather(lat, lon);
        },
        (error) => {
          console.warn("Location error:", error.message);
          fetchWeather(defaultLat, defaultLon);
        },
        {
          timeout: 5000
        }
      );
    } else {
      console.warn("Geolocation not supported.");
      fetchWeather(defaultLat, defaultLon);
    }
  }

  document.addEventListener("DOMContentLoaded", initWeather);
</script>

<script>
  const toggleBtn = document.getElementById("toggle-panel");
  const panel = document.getElementById("notification-panel");
  const icon = toggleBtn.querySelector("i");
  const text = toggleBtn.querySelector("span");

  toggleBtn.addEventListener("click", () => {
    panel.classList.remove("animate__fadeOutUp");
    if (panel.classList.contains("d-none")) {
      panel.classList.remove("d-none");
      panel.classList.add("animate__fadeInDownBig");
      toggleBtn.classList.remove("btn-danger");
      toggleBtn.classList.add("btn-outline-danger", "shadow-lg");
      icon.classList.remove("fa-bell");
      icon.classList.add("fa-bell-slash");
      text.innerText = "Hide Notifications";
    } else {
      panel.classList.remove("animate__fadeInDownBig");
      panel.classList.add("animate__fadeOutUp");
      setTimeout(() => panel.classList.add("d-none"), 500);
      toggleBtn.classList.remove("btn-outline-danger");
      toggleBtn.classList.add("btn-danger");
      icon.classList.remove("fa-bell-slash");
      icon.classList.add("fa-bell");
      text.innerText = "Show Notifications";
    }
  });
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  const statusEl = document.getElementById("overall-quality");
  if (statusEl) {
    const status = statusEl.textContent.trim();

    // Accept English or Hindi status texts
    const safeStatuses = ["Safe", "‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§"];
    const notSafeStatuses = ["Not Safe", "‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç"];

    if (safeStatuses.includes(status)) {
      updateCardColor("Safe");
    } else if (notSafeStatuses.includes(status)) {
      updateCardColor("Not Safe");
    }
  }
});

</script>

<style>
.animated-dropdown {
  animation: slideFade 0.4s ease forwards;
  opacity: 0;
  transform: translateY(-10px);
}

@keyframes slideFade {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animated-item {
  transition: all 0.25s ease;
  cursor: pointer;
}

.animated-item:hover {
  background-color: #e3f2fd;
  transform: scale(1.02);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const changeBtn = document.getElementById('changePlaceBtn');
  const dropdown = document.getElementById('placeDropdown');
  const villageList = document.getElementById('village-list');
  const townList = document.getElementById('town-list');
  const toast = document.getElementById('toast');

  let places = [];

  // Toggle dropdown
  changeBtn.addEventListener('click', () => {
    dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
  });

  // Load places and populate dropdown
  fetch('/api/places/')
    .then(res => res.json())
    .then(data => {
      places = data;
      populateDropdown();
      const savedPlaceId = localStorage.getItem('selectedPlaceId');
      if (savedPlaceId) fetchAndDisplayData(savedPlaceId);
    });

  function populateDropdown() {
    villageList.innerHTML = '';
    townList.innerHTML = '';

    places.forEach(place => {
      const li = document.createElement('li');
      li.className = 'list-group-item animated-item';
      li.textContent = place.name;
      li.addEventListener('click', () => {
        localStorage.setItem('selectedPlaceId', place.id);
        showToast();
        dropdown.style.display = 'none';
        fetchAndDisplayData(place.id);
      });

      if (place.type.toLowerCase() === 'village') {
        villageList.appendChild(li);
      } else if (place.type.toLowerCase() === 'town') {
        townList.appendChild(li);
      }
    });
  }

  function fetchAndDisplayData(placeId) {
    fetch(`/api/data/?place_id=${placeId}`)
      .then(response => response.json())
      .then(data => {
        // Update groundwater level card
        document.getElementById('location-name').textContent = data.place.name;
        document.getElementById('location-level').textContent = data.level + " m";
        document.getElementById('location-status').textContent = data.level_status;

        // Update water quality card
        document.getElementById('quality-status').textContent = data.quality_status;
        document.getElementById('quality-values').textContent = data.quality_values;

        // Update color
        updateCardColor(data.quality_status);
      });
  }

  function showToast() {
    toast.style.display = 'block';
    setTimeout(() => toast.style.display = 'none', 2500);
  }
});
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("toggleSidebar");
    const sidebar = document.getElementById("sidenav-main");
    const overlay = document.getElementById("sidebarOverlay");

    // Toggle sidebar
    toggleBtn.addEventListener("click", function (e) {
      e.stopPropagation();
      sidebar.classList.toggle("show");
      overlay.classList.toggle("d-none");
    });

    // Click overlay to hide sidebar
    overlay.addEventListener("click", function () {
      sidebar.classList.remove("show");
      overlay.classList.add("d-none");
    });

    // Click outside sidebar (anywhere on document)
    document.addEventListener("click", function (e) {
      const isMobile = window.innerWidth < 1200;
      const isSidebarOpen = sidebar.classList.contains("show");
      const clickedInsideSidebar = sidebar.contains(e.target);
      const clickedToggle = toggleBtn.contains(e.target);

      if (isMobile && isSidebarOpen && !clickedInsideSidebar && !clickedToggle) {
        sidebar.classList.remove("show");
        overlay.classList.add("d-none");
      }
    });

    // Prevent bubbling from inside sidebar
    sidebar.addEventListener("click", function (e) {
      e.stopPropagation();
    });
  });
</script>

<style>
  /* Hide Soft UI default top-right hamburger */
  .navbar .navbar-toggler {
    display: none !important;
  }
</style>







<script>
document.addEventListener("DOMContentLoaded", () => {
  const typeSelect = document.getElementById("type-select");
  const placeSelect = document.getElementById("place-select");
  const form = document.getElementById("preference-form");

  typeSelect.addEventListener("change", () => {
    const type = typeSelect.value;
    fetch(`/api/places/?district=Karnal&type=${type}`)
      .then(res => res.json())
      .then(data => {
        placeSelect.innerHTML = '<option disabled selected>Select Place</option>';
        data.forEach(place => {
          const option = document.createElement("option");
          option.value = place.id;
          option.textContent = place.name;
          placeSelect.appendChild(option);
        });
      });
  });

  form.addEventListener("submit", function (e) {
    e.preventDefault();
    const placeId = placeSelect.value;
    if (!placeId) return alert("Please select a place.");

    fetch("/save-user-place/", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "X-CSRFToken": "{{ csrf_token }}"
      },
      body: JSON.stringify({ place_id: placeId })
    })
    .then(res => res.json())
    .then(data => {
      // ‚úÖ Hide modal
      const modal = document.getElementById("selectPlaceModal");
      if (modal) modal.classList.add("hidden");

      // ‚úÖ Reload to show updated dashboard cards
      window.location.reload();
    })
    .catch(err => {
      console.error("Error saving preference", err);
      alert("Failed to save. Try again.");
    });
  });
});
</script>

<style>
  select {
    transition: all 0.3s ease-in-out;
  }
  select:focus {
    outline: none;
    box-shadow: 0 0 5px #0ff;
  }
</style>

<!-- üåü CSS (Paste in <style> block or stylesheet) -->
<style>
.inline-form {
  display: flex;
  flex-wrap: wrap;
  gap: 24px;
  justify-content: center;
  align-items: center;
  margin: 40px auto 20px;
  font-family: 'Segoe UI', sans-serif;
}

/* Form element */
.form-group {
  display: flex;
  flex-direction: column;
  color: #333;
}

.form-group label {
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 6px;
}

.form-group select {
  padding: 8px 12px;
  border-radius: 6px;
  background: #fff;
  border: 1px solid #ccc;
  min-width: 160px;
  transition: border 0.3s, box-shadow 0.3s;
}

.form-group select:focus {
  border-color: #ff4d4f;
  box-shadow: 0 0 5px #ff4d4f66;
  outline: none;
}

/* Submit button in red */
.btn-wrapper button {
  background: #ff4d4f;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  color: #fff;
  font-weight: bold;
  font-size: 14px;
  cursor: pointer;
  transition: background 0.3s, transform 0.2s;
}

.btn-wrapper button:hover {
  background: #e60000;
  transform: scale(1.05);
}
</style>

<style>
  .sidenav-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(255, 255, 255, 0.6);
    z-index: 1030;
    pointer-events: all;
  }

  #sidenav-main {
    z-index: 1040;
  }

  #sidenav-main.show {
    transform: translateX(0);
  }

  @media (min-width: 1200px) {
    #sidenav-main {
      transform: none !important;
    }

    #toggleSidebar,
    #sidebarOverlay {
      display: none !important;
    }
  }
</style>


<style>
  .navbar .navbar-toggler {
    display: none !important;
  }
</style>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const langBtn = document.getElementById('langBtn');
  const langDropdown = document.getElementById('langDropdown');
  const langFlag = document.getElementById('langFlag');
  const langForm = document.getElementById('language-form');

  // Toggle dropdown
  function openDropdown() {
    langDropdown.classList.remove('d-none');
    langDropdown.style.opacity = 1;
  }
  function closeDropdown() {
    langDropdown.classList.add('d-none');
  }

  langBtn.addEventListener('click', function (e) {
    e.stopPropagation();
    if (langDropdown.classList.contains('d-none')) openDropdown();
    else closeDropdown();
  });

  // click outside closes
  document.addEventListener('click', function (e) {
    if (!langBtn.contains(e.target) && !langDropdown.contains(e.target)) {
      closeDropdown();
    }
  });

  // handle selection via JS to send AJAX POST (enhancement)
  langDropdown.querySelectorAll('button[name="language"]').forEach(btn => {
    btn.addEventListener('click', function (ev) {
      ev.preventDefault();
      const lang = btn.value;
      const next = langForm.querySelector('input[name="next"]').value || window.location.pathname;

      // prepare csrf token
      const csrf = langForm.querySelector('input[name="csrfmiddlewaretoken"]').value;

      // animate flag/text quickly
      langFlag.innerText = lang.toUpperCase();
      closeDropdown();

      // POST to set_language then reload
      fetch("{% url 'set_language' %}", {
        method: 'POST',
        credentials: 'same-origin',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',
          'X-CSRFToken': csrf,
        },
        body: new URLSearchParams({ language: lang, next: next }).toString()
      })
      .then(resp => {
        // success -> reload to reflect translation
        if (resp.ok) {
          // add a tiny delay for nicer animation
          setTimeout(() => window.location.href = next, 180);
        } else {
          // fallback: submit the form normally
          langForm.querySelector('button[name="language"][value="' + lang + '"]').click();
        }
      })
      .catch(() => {
        // fallback to normal submit on network error
        langForm.querySelector('button[name="language"][value="' + lang + '"]').click();
      });
    });
  });
});
</script>


<style>
/* language switcher styles */
.lang-btn {
  background: rgba(255,255,255,0.85);
  border: 1px solid rgba(251,140,0,0.12);
  color: #333;
  padding: 8px 12px;
  border-radius: 12px;
  cursor: pointer;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  transition: transform .14s ease, box-shadow .14s ease;
  font-weight: 600;
}

.lang-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(251,140,0,0.12); }

.lang-flag {
  display:inline-flex;
  width:30px;
  height:22px;
  align-items:center;
  justify-content:center;
  border-radius:6px;
  background:#fff;
  color:#FB8C00;
  border: 1px solid rgba(251,140,0,0.14);
  font-weight:700;
}

/* dropdown */
.lang-dropdown {
  position: absolute;
  right: 0;
  top: calc(100% + 10px);
  min-width: 170px;
  background: rgba(255,255,255,0.95);
  border-radius: 12px;
  padding: 6px;
  list-style: none;
  z-index: 2000;
  border: 1px solid rgba(0,0,0,0.06);
  box-shadow: 0 10px 30px rgba(19,31,49,0.06);
  transform-origin: top right;
  animation: dropdownIn .18s ease;
}

/* small dropdown item style */
.lang-dropdown .dropdown-item {
  display: block;
  width: 100%;
  text-align: left;
  background: transparent;
  border: none;
  padding: 10px 12px;
  border-radius: 8px;
  font-weight: 600;
  color: #333;
  cursor: pointer;
}

.lang-dropdown .dropdown-item:hover {
  background: rgba(251,140,0,0.08);
  color: #FB8C00;
}

@keyframes dropdownIn {
  from { opacity: 0; transform: translateY(-6px) scale(.98); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

/* small-screen tweaks */
@media (max-width: 576px) {
  .lang-label { display: none !important; }
  .lang-btn { padding: 8px; border-radius: 10px; }
}
.lang-switcher {
  position: fixed;
  top: 70px;              /* below your notification bell */
  right: 20px;
  z-index: 3000;
  opacity: 0;
  transform: translateY(-20px);
  animation: slideInLang 0.6s ease-out forwards;
}

@keyframes slideInLang {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.lang-switcher .btn {
  border-radius: 30px;
  padding: 8px 18px;
  font-weight: 500;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.lang-switcher .btn:hover {
  transform: scale(1.05);
}

.lang-switcher .btn:hover .lang-text {
  text-decoration: underline;
}

/* Rotating globe effect */
.lang-switcher .btn:hover::before {
  content: "üåê";
  display: inline-block;
  animation: spinGlobe 1s linear infinite;
}

.lang-switcher .btn span.lang-text {
  display: inline-block;
}

@keyframes spinGlobe {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

</style>

</body>
</html>


